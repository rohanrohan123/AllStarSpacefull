(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{13:function(e){e.exports=JSON.parse('{"name":"blog","version":"0.1.0","private":true,"dependencies":{"@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","axios":"^0.24.0","react":"^17.0.2","react-dom":"^17.0.2","react-router-dom":"^5.2.0","react-scripts":"4.0.3","web-vitals":"^1.0.1"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"proxy":"http://44.202.13.47:8000/api/"}')},56:function(e,t,s){},58:function(e,t,s){},67:function(e,t,s){},68:function(e,t,s){},69:function(e,t,s){},70:function(e,t,s){},71:function(e,t,s){},72:function(e,t,s){},73:function(e,t){},74:function(e,t,s){},75:function(e,t,s){},76:function(e,t,s){},77:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s.n(c),n=s(30),r=s.n(n),i=s(11),o=s(5),l=s(3),u=s.n(l),j=s(8),p=s.n(j),b=s(2),d=(s(56),s(0));function O(){return Object(d.jsxs)("div",{className:"header",children:[Object(d.jsxs)("div",{className:"headerTitles",children:[Object(d.jsx)("span",{className:"headerTitleSm"}),Object(d.jsx)("span",{className:"headerTitleLg",children:"BLOG"})]}),Object(d.jsx)("img",{className:"headerImg",src:"https://images.pexels.com/photos/262508/pexels-photo-262508.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",alt:""})]})}var x=s(12);s(58);function h(e){var t=e.post;return Object(d.jsxs)("div",{className:"post",children:[t.photo&&Object(d.jsx)("img",{className:"postImg",src:"http://44.202.13.47:8000/images/"+t.photo,alt:""}),Object(d.jsxs)("div",{className:"postInfo",children:[Object(d.jsx)("div",{className:"postCats",children:t.categories.map((function(e){return Object(d.jsx)("span",{className:"postCat",children:e.name})}))}),Object(d.jsx)(x.b,{to:"/post/".concat(t._id),className:"link",children:Object(d.jsx)("span",{className:"postTitle",children:t.title})}),Object(d.jsx)("hr",{}),Object(d.jsx)("span",{className:"postDate",children:new Date(t.createdAt).toDateString()})]}),Object(d.jsx)("p",{className:"postDesc",children:t.desc})]})}s(67);function m(e){var t=e.posts;return Object(d.jsx)("div",{className:"posts",children:t.map((function(e){return Object(d.jsx)(h,{post:e})}))})}s(68);function f(){return Object(d.jsx)("div",{className:"sidebar"})}s(69);var v=s(21),g=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":case"UPDATE_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"UPDATE_START":return Object(v.a)(Object(v.a)({},e),{},{isFetching:!0});case"UPDATE_FAILURE":return{user:e.user,isFetching:!1,error:!0};case"LOGOUT":return{user:null,isFetching:!1,error:!1};default:return e}},N={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},w=Object(c.createContext)(N),y=function(e){var t=e.children,s=Object(c.useReducer)(g,N),a=Object(o.a)(s,2),n=a[0],r=a[1];return Object(c.useEffect)((function(){localStorage.setItem("user",JSON.stringify(n.user))}),[n.user]),Object(d.jsx)(w.Provider,{value:{user:n.user,isFetching:n.isFetching,error:n.error,dispatch:r},children:t})};s(70);function I(){var e=Object(c.useContext)(w),t=e.user,s=e.dispatch;return Object(d.jsx)("div",{className:"top",children:Object(d.jsx)("div",{className:"topCenter",children:Object(d.jsxs)("ul",{className:"topList",children:[Object(d.jsx)("li",{className:"topListItem",children:Object(d.jsx)(x.b,{className:"link",to:"/",children:"HOME"})}),Object(d.jsx)("li",{className:"topListItem",children:Object(d.jsx)(x.b,{className:"link",to:"/write",children:"WRITE"})}),Object(d.jsxs)("li",{className:"topListItem",onClick:function(){s({type:"LOGOUT"})},children:[" ",t&&"LOGOUT"]})]})})})}var S=s(13);function C(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),s=t[0],a=t[1],n=Object(b.f)().search;return Object(c.useEffect)((function(){var e=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(S.proxy,"post")+n);case 2:t=e.sent,a(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(I,{}),Object(d.jsx)(O,{}),Object(d.jsx)("div",{className:"home",children:Object(d.jsx)(m,{posts:s})})]})}s(71);function F(){var e=Object(c.useRef)(),t=Object(c.useRef)(),s=Object(c.useContext)(w),a=s.dispatch,n=s.isFetching,r=function(){var s=Object(i.a)(u.a.mark((function s(c){var n;return u.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return c.preventDefault(),a({type:"LOGIN_START"}),s.prev=2,s.next=5,p.a.post("".concat(S.proxy,"auth/Login"),{username:e.current.value,password:t.current.value});case 5:n=s.sent,a({type:"LOGIN_SUCCESS",payload:n.data}),s.next=12;break;case 9:s.prev=9,s.t0=s.catch(2),a({type:"LOGIN_FAIL"});case 12:case"end":return s.stop()}}),s,null,[[2,9]])})));return function(e){return s.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"card",children:Object(d.jsxs)("div",{className:"login",children:[Object(d.jsx)("span",{className:"loginTitle",children:"Login"}),Object(d.jsxs)("form",{className:"loginForm",onSubmit:r,children:[Object(d.jsx)("label",{children:"Username"}),Object(d.jsx)("input",{className:"loginInput",type:"text",placeholder:"Enter your username...",ref:e}),Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{className:"loginInput",type:"password",placeholder:"Enter your password...",ref:t}),Object(d.jsx)("button",{className:"loginButton",type:"submit",disabled:n,children:"Login"})]})]})})}s(72);s(73),s(74);function L(){var e=Object(b.f)().pathname.split("/")[2],t=Object(c.useState)({}),s=Object(o.a)(t,2),a=s[0],n=s[1],r=Object(c.useContext)(w).user,l=Object(c.useState)(""),j=Object(o.a)(l,2),O=j[0],h=j[1],m=Object(c.useState)(""),f=Object(o.a)(m,2),v=f[0],g=f[1],N=Object(c.useState)(!1),y=Object(o.a)(N,2),I=y[0],C=y[1];Object(c.useEffect)((function(){var t=function(){var t=Object(i.a)(u.a.mark((function t(){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("".concat(S.proxy,"post/")+e);case 2:s=t.sent,n(s.data),h(s.data.title),g(s.data.desc);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var F=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.delete("".concat(S.proxy,"post/").concat(a._id),{data:{username:r.username}});case 3:window.location.replace("/"),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.put("".concat(S.proxy,"post/").concat(a._id),{username:r.username,title:O,desc:v});case 3:C(!1),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"singlePost",children:Object(d.jsxs)("div",{className:"singlePostWrapper",children:[a.photo&&Object(d.jsx)("img",{src:"http://44.202.13.47:8000/images/"+a.photo,alt:"",className:"singlePostImg"}),I?Object(d.jsx)("input",{type:"text",value:O,className:"singlePostTitleInput",autoFocus:!0,onChange:function(e){return h(e.target.value)}}):Object(d.jsxs)("h1",{className:"singlePostTitle",children:[O,a.username===(null===r||void 0===r?void 0:r.username)&&Object(d.jsxs)("div",{className:"singlePostEdit",children:[Object(d.jsx)("i",{className:"singlePostIcon far fa-edit",onClick:function(){return C(!0)}}),Object(d.jsx)("i",{className:"singlePostIcon far fa-trash-alt",onClick:F})]})]}),Object(d.jsxs)("div",{className:"singlePostInfo",children:[Object(d.jsxs)("span",{className:"singlePostAuthor",children:["Author:",Object(d.jsx)(x.b,{to:"/?user=".concat(a.username),className:"link",children:Object(d.jsxs)("b",{children:[" ",a.username]})})]}),Object(d.jsx)("span",{className:"singlePostDate",children:new Date(a.createdAt).toDateString()})]}),I?Object(d.jsx)("textarea",{className:"singlePostDescInput",value:v,onChange:function(e){return g(e.target.value)}}):Object(d.jsx)("p",{className:"singlePostDesc",children:v}),I&&Object(d.jsx)("button",{className:"singlePostButton",onClick:L,children:"Update"})]})})})}s(75);function T(){return Object(d.jsxs)("div",{className:"single",children:[Object(d.jsx)(L,{}),Object(d.jsx)(f,{})]})}s(76);function k(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(""),r=Object(o.a)(n,2),l=r[0],j=r[1],b=Object(c.useState)(null),O=Object(o.a)(b,2),x=O[0],h=O[1],m=Object(c.useContext)(w).user,f=function(){var e=Object(i.a)(u.a.mark((function e(t){var c,a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c={username:m.username,title:s,desc:l},!x){e.next=15;break}return a=new FormData,n=Date.now()+x.name,a.append("name",n),a.append("file",x),c.photo=n,e.prev=8,e.next=11,p.a.post("".concat(S.proxy,"upload"),a);case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(8);case 15:return e.prev=15,e.next=18,p.a.post("".concat(S.proxy,"post"),c);case 18:r=e.sent,window.location.replace("/post/"+r.data._id),e.next=24;break;case 22:e.prev=22,e.t1=e.catch(15);case 24:case"end":return e.stop()}}),e,null,[[8,13],[15,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(I,{}),Object(d.jsxs)("div",{className:"write",children:[x&&Object(d.jsx)("img",{className:"writeImg",src:URL.createObjectURL(x),alt:""}),Object(d.jsxs)("form",{className:"writeForm",onSubmit:f,children:[Object(d.jsxs)("div",{className:"writeFormGroup",children:[Object(d.jsx)("label",{htmlFor:"fileInput",children:Object(d.jsx)("i",{className:"writeIcon fas fa-plus"})}),Object(d.jsx)("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:function(e){return h(e.target.files[0])}}),Object(d.jsx)("input",{type:"text",placeholder:"Title",className:"writeInput",autoFocus:!0,onChange:function(e){return a(e.target.value)}})]}),Object(d.jsx)("div",{className:"writeFormGroup",children:Object(d.jsx)("textarea",{placeholder:"Tell your story...",type:"text",className:"writeInput writeText",onChange:function(e){return j(e.target.value)}})}),Object(d.jsx)("button",{className:"writeSubmit",type:"submit",children:"Publish"})]})]})]})}var P=function(){var e=Object(c.useContext)(w).user;return Object(d.jsx)(x.a,{children:Object(d.jsxs)(b.c,{children:[Object(d.jsxs)(b.a,{exact:!0,path:"/",children:[" ",e?Object(d.jsx)(C,{}):Object(d.jsx)(F,{})," "]}),Object(d.jsx)(b.a,{exact:!0,path:"/write",children:e?Object(d.jsx)(k,{}):Object(d.jsx)(F,{})}),Object(d.jsx)(b.a,{exact:!0,path:"/post/:postId",children:Object(d.jsx)(T,{})})]})})};r.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(y,{children:Object(d.jsx)(P,{})})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.76dff8b0.chunk.js.map